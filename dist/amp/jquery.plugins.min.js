/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(e){var t={};t.VERSION="1.3.0",t.data={hit:50,area:10},t.isTouch=function(){var e=document.createElement("div");return e.setAttribute("ontouchstart","return"),"function"==typeof e.ontouchstart}(),t.events=["flick","flickX","flickY","flickcancel","flickmove","flickmoveX","flickmoveY"],t.getSetup=function(n){var o="._"+n.toUpperCase();return function(i){var c=e(this);c.on("mousedown"+o+" touchstart"+o,function(o){var a=e.extend({},t.data,i);t[n].handler(c,o,a)})}},t.getTeardown=function(n){var o="._"+n.toUpperCase();return function(){e(this).off("mousedown"+o+" touchstart"+o,t[n].handler)}},t.getFlickHandler=function(n){var o="._"+n.toUpperCase(),i="flick"===n||"flickX"===n,c="flick"===n||"flickY"===n;return function(a,r,v){var u=t.createEventData(r);t.isTouch||r.preventDefault(),a.off("mousemove"+o+" touchmove"+o+" click"+o).on("mousemove"+o+" touchmove"+o,function(e){t.setMoveData(e,u,v),u.isMoveX&&i||u.isMoveY&&c}).on("click"+o,function(e){var t=u.isMoveX&&v.area<Math.abs(u.moveX)&&i,n=u.isMoveY&&v.area<Math.abs(u.moveY)&&c;(i&&t||c&&n)&&e.preventDefault()}),a.find("a").off("click"+o).on("click"+o,function(){return i&&u.isMoveX||c&&u.isMoveY?!1:void 0}),e("html").off("mouseup"+o+" touchend"+o).one("mouseup"+o+" touchend"+o,function(){if(a.off("mousemove"+o+" touchmove"+o+" click"+o),u&&u.flickEvent){u.flickEvent.type=n,u.flickEvent.moveX=u.moveX,u.flickEvent.moveY=u.moveY;var e=u.isMoveX&&v.area<Math.abs(u.moveX)&&i,t=u.isMoveY&&v.area<Math.abs(u.moveY)&&c;(i&&e||c&&t)&&a.trigger(u.flickEvent)}})}},t.getCancelHandler=function(n){var o="._"+n.toUpperCase(),i="flickcancel"===n||"flickcancelX"===n,c="flickcancel"===n||"flickcancelY"===n;return function(a,r,v){var u=t.createEventData(r);t.isTouch||r.preventDefault(),a.off("mousemove"+o+" touchmove"+o+" click"+o).on("mousemove"+o+" touchmove"+o,function(e){t.setMoveData(e,u,v),u.isMoveX&&i||u.isMoveY&&c}).on("click"+o,function(e){var t=u.isMoveX&&v.area<Math.abs(u.moveX)&&i,n=u.isMoveY&&v.area<Math.abs(u.moveY)&&c;(i&&t||c&&n)&&e.preventDefault()}),a.find("a").off("click"+o).on("click"+o,function(){u.isMoveX&&v.area<Math.abs(u.moveX)&&i,u.isMoveY&&v.area<Math.abs(u.moveY)&&c;return i&&u.isMoveX||c&&u.isMoveY?!1:void 0}),e("html").off("mouseup"+o+" touchend"+o).one("mouseup"+o+" touchend"+o,function(){if(a.off("mousemove"+o+" touchmove"+o+" click"+o),u&&u.flickEvent){var e=u.isMoveX&&v.area<Math.abs(u.moveX)&&i,t=u.isMoveY&&v.area<Math.abs(u.moveY)&&c;u.flickEvent.type=n,u.flickEvent.moveX=u.moveX,u.flickEvent.moveY=u.moveY,!(i&&u.isMoveX||c&&u.isMoveY)||e&&t||a.trigger(u.flickEvent)}})}},t.getMoveHandler=function(n){var o="._"+n.toUpperCase(),i="flickmove"===n||"flickmoveX"===n,c="flickmove"===n||"flickmoveY"===n;return function(a,r,v){var u=t.createEventData(r);t.isTouch||r.preventDefault(),a.off("mousemove"+o+" touchmove"+o+" click"+o).on("mousemove"+o+" touchmove"+o,function(e){t.setMoveData(e,u,v),u.isMoveX?("flickmove"===n||"flickmoveX"===n)&&(u.flickEvent.type=n,u.flickEvent.moveX=u.moveX,u.flickEvent.moveY=u.moveY,a.trigger(u.flickEvent)):u.isMoveY&&("flickmove"===n||"flickmoveY"===n)&&(u.flickEvent.type=n,u.flickEvent.moveX=u.moveX,u.flickEvent.moveY=u.moveY,a.trigger(u.flickEvent)),(u.isMoveX&&i||u.isMoveY&&c)&&e.preventDefault()}).on("click"+o,function(e){i&&u.isMoveX&&v.area<Math.abs(u.moveX)&&e.preventDefault()}),a.find("a").off("click"+o).on("click"+o,function(){var e=u.isMoveX&&v.area<Math.abs(u.moveX)&&i,t=u.isMoveY&&v.area<Math.abs(u.moveY)&&c;return i&&e||c&&t?!1:void 0}),e("html").off("mouseup"+o+" touchend"+o).on("mouseup"+o+" touchend"+o,function(){a.off("mousemove"+o+" touchmove"+o+" click"+o)})}},t.createEventData=function(e){return{flickEvent:null,isMoveX:!1,isMoveY:!1,moveX:0,moveY:0,startX:t.isTouch?e.originalEvent.changedTouches[0].pageX:e.pageX,startY:t.isTouch?e.originalEvent.changedTouches[0].pageY:e.pageY}},t.getFlickHasMap=function(e){return{isSide:"flick"===e||"flickX"===e||"flickmove"===e||"flickmoveX"===e||"flickcancel"===e||"flickcancelX"===e,isUpdown:"flick"===e||"flickY"===e||"flickmove"===e||"flickmoveX"===e||"flickcancel"===e||"flickcancelY"===e}},t.setMoveData=function(e,n,o){n.flickEvent=e,t.isTouch?(n.moveX=e.originalEvent.changedTouches[0].pageX-n.startX,n.moveY=n.startY-e.originalEvent.changedTouches[0].pageY):(n.moveX=e.pageX-n.startX,n.moveY=n.startY-e.pageY),!n.isMoveX&&o.area<Math.abs(n.moveY)?n.isMoveY=!0:!n.isMoveY&&o.area<Math.abs(n.moveX)&&(n.isMoveX=!0)},t.flick={setup:t.getSetup("flick"),teardown:t.getTeardown("flick"),handler:t.getFlickHandler("flick")},t.flickX={setup:t.getSetup("flickX"),teardown:t.getTeardown("flickX"),handler:t.getFlickHandler("flickX")},t.flickcancel={setup:t.getSetup("flickcancel"),teardown:t.getTeardown("flickcancel"),handler:t.getCancelHandler("flickcancel")},t.flickmove={setup:t.getSetup("flickmove"),teardown:t.getTeardown("flickmove"),handler:t.getMoveHandler("flickmove")},t.flickmoveX={setup:t.getSetup("flickmoveX"),teardown:t.getTeardown("flickmoveX"),handler:t.getMoveHandler("flickmoveX")},t.flickmoveY={setup:t.getSetup("flickmoveY"),teardown:t.getTeardown("flickmoveY"),handler:t.getMoveHandler("flickmoveY")},e._Flick=t,e.each(t.events,function(n,o){e.event.special[o]=t[o],e.fn[o]=function(e,t){return arguments.length>0?this.on(o,null,e,t):this.trigger(o)}})}(jQuery),function(e){e.each({mouseenter:"slipin",mouseleave:"slipout"},function(t,n){e.event.special[n]={setup:function(){e(this).on(t,e.event.special[n].handler)},teardown:function(){e(this).off(t,e.event.special[n].handler)},handler:function(t){var o={},i=e(this),c=i.offset(),a=i.width(),r=i.height(),v=(t.pageX-c.left-a/2)*(a>r?r/a:1),u=(t.pageY-c.top-r/2)*(r>a?a/r:1),f=Math.round((Math.atan2(u,v)*(180/Math.PI)+180)/90+3)%4;switch(o.originalEvent=t,o.x=v,o.y=u,o.type=n,f){case 0:o.direction="top";break;case 1:o.direction="right";break;case 2:o.direction="bottom";break;case 3:o.direction="left"}i.trigger(o)}},e.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}}),e.fn.slip=function(e,t){return this.slipin(e).slipout(t||e)}}(jQuery),function(e){e.each({resize:"resizestop",scroll:"scrollstop"},function(t,n){e.event.special[n]={data:{eventType:n,timer:100,timerId:null},setup:function(o){var i=e.extend({},e.event.special[n].data,o);e(this).on(t,function(){e.event.special[n].handler(i)})},teardown:function(){e(this).off(t)},handler:function(t){clearTimeout(t.timerId),t.timerId=setTimeout(function(){e(this).trigger(t.eventType)},t.timer)}},e.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}})}(jQuery),function(e){e.sequence=function(){var t,n,o=new e.Deferred,i=new e.Deferred;t=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),t[t.length]=o.resolve;for(var c=0,a=t.length;a>c;c+=1)e.isFunction(t[c])&&(n=(n?n:i).pipe(e.proxy(function(){return this()},t[c])).fail(o.reject));return i.resolve(),o.promise()},e.stream=function(){var t,n=new e.Deferred,o=0;t=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),t[t.length]=n.resolve;var i=function(c,a){e.when(c(a)).fail(n.reject).done(function(e){n.notify(e),o+=1,o!==t.length&&i(t[o],e)})};return i(t[o]),n.promise()}}(jQuery),function(e){e.each({css:"qCss",attr:"qAttr"},function(t,n){e.fn[n]=function(e,n){var o=this;return o.queue(function(){return o[t](e,n).dequeue()})}}),e.each({addClass:"qAddClass",removeClass:"qRemoveClass"},function(t,n){e.fn[n]=function(e){var n=this;return n.queue(function(){return n[t](e).dequeue()})}}),e.fn.qCall=function(e){var t=this;return t.queue(function(){return e(),t.dequeue()})},e.fn.replaceAttr=function(e,t,n){var o=this.attr(e);return o?(n=n?n:"",this.attr(e,o.replace(t,n))):this},e.fn.getExt=function(e){var t=this.attr(e);return t.indexOf(".")>-1?t.substring(t.lastIndexOf(".")):void 0}}(jQuery);