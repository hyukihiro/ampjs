/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(e,t){function a(e,r){var i=this;i.param=t.extend(!0,a.defaults,{$wrap:e,$frame:e.find(".slider-frame"),$slide:e.find(".slider-list"),$items:e.find(".slider-list").children(),$pointer:e.find(".pointer"),$thumbnail:e.find(".thumbnail a"),$prev:e.find(".prev a"),$next:e.find(".next a"),length:e.find(".list").children().length,visibleLength:0,visible:0,distance:0,left:0,_timerId:null,_isAnimate:!1},r),i.param.start&&i.init()}var r=a.prototype;a.VERSION="1.0",r._name="Slider",a.defaults={$frame:null,$slide:null,$items:null,$pointer:null,$thumbnail:null,$prev:null,$next:null,start:!0,isFlick:!0,isLoop:!0,isTimerCancel:!0,current:0,slideFix:0,timer:0,duration:500,ease:"easeOutQuart",activeClass:"active",tweenStartCall:t.noop,tweenCall:t.noop,tweenEndCall:t.noop,resizeCall:t.noop,resizeStopCall:t.noop},r.param=null,r.init=function(){var e=this;e.setParam(),e._createPointer(),e.setPosition(),e.active(),e.addEventResize(),e.addEventTimerCancel(),e.addEventFlick(e.param.$slide),e.addEventNext(e.param.$next),e.addEventPrev(e.param.$prev),e.addEventPager(e.param.$thumbnail),e.addEventPager(e.param.$pointer.find("a")),e.timerStart()},r.setParam=function(){var e,t,a,r=this;return e=r.param.$frame.width(),t=r.param.$items.outerWidth(!0),a=~~(e/t),r.param.distance=0<r.param.slideFix&&r.param.slideFix<=a?r.param.slideFix*t:a*t,r.param.current=Math.ceil(r.param.visible<a?r.param.current/a:r.param.current*a),r.param.visible=a,r.param.visibleLength=r.getVisibleLength(),r},r.addEventResize=function(){var e=this;return t(window).off("resize.Slider resizestop.Slider").on("resize.Slider",function(){e.timerStop(),e.setParam(),e.setPosition(),e.active(),e.param.resizeCall(e.param)}).on("resizestop.Slider",function(){e.timerStart(),e.param.resizeStopCall(e.param)}),e},r.addEventTimerCancel=function(){var e=this;return e.param.$wrap.off("mouseenter.Slider mouseleave.Slider").on("mouseenter.Slider",function(){e.param.isTimerCancel&&e.timerStop()}).on("mouseleave.Slider",function(){e.param.isTimerCancel&&e.timerStart()}),e},r.addEventNext=function(e){var t=this;return e.off("click.Slider").on("click.Slider",function(){return t.next(),!1}),t},r.addEventPrev=function(e){var t=this;return e.off("click.Slider").on("click.Slider",function(){return t.prev(),!1}),t},r.addEventPager=function(e){var t=this;return e.off("click.Slider").on("click.Slider",function(){return t.moveTo(e.index(this)),!1}),t},r.addEventFlick=function(e){var t=this;return e.off("flickmoveX.Slider flickcancelX.Slider flickX.Slider").on("flickmoveX.Slider",function(e){t._move(e.moveX)}).on("flickcancelX.Slider",function(){}).on("flickX.Slider",function(e){0<e.moveX?t.prev():t.next()}),t},r.timerStart=function(e){var t=this;return AMP.isNumber(e)&&(t.param.timer=e),t.timerStop(),0<t.param.timer&&(t.param._timerId=setTimeout(function(){t.next()},t.param.timer+t.param.duration)),t},r.timerStop=function(){return clearTimeout(this.param._timerId),this},r.next=function(){return this._controller(this.param.current+1),this},r.prev=function(){return this._controller(this.param.current-1),this},r.moveTo=function(e){return AMP.isNumber(e)&&e<this.param.length&&this._controller(e),this},r._controller=function(e){var a=this;if(!a.param._isAnimate){if(e>-1&&e<a.param.length)a.param.current=e;else{if(!a.param.isLoop)return;a.param.current=e>-1?e-a.param.length:a.param.length+e}t.sequence(function(){return a.param._isAnimate=!0,a.timerStop(),a.active(),a.param.tweenStartCall(a.param)},function(){a._tween()},function(){return a.param._isAnimate=!0,a.timerStart(),a.param.tweenEndCall(a.param)})}},r._createPointer=function(){if(this.param.$pointer[0]){for(var e=this.param.$pointer[0].innerHTML,t="",a=0;a<this.param.length;a+=1)t+=e;this.param.$pointer[0].innerHTML=t}return this},r.setPosition=function(){return this},r.active=function(){return this.param.$pointer[0]&&this.param.$pointer.children().removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.$thumbnail[0]&&this.param.$thumbnail.removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.current===this.param.length-1?this.param.$next.addClass(this.param.activeClass):this.param.$next.removeClass(this.param.activeClass),0===this.param.current?this.param.$prev.addClass(this.param.activeClass):this.param.$prev.removeClass(this.param.activeClass),this.param.$items.removeClass(this.param.activeClass).slice(this.param.current,this.param.current+this.param.visible).addClass(this.param.activeClass),this},r._move=function(e){this.param.$slide.css({left:this.param.left+e})},r._resetTween=function(){return this.param.$slide.velocity({left:this.param.left},100,this.param.ease)},r._tween=function(){return this.param.$slide.velocity({left:this.param.left},this.param.duration,this.param.ease)},r.getVisibleLength=function(){var e=0;return this.param.items.each(function(){"none"!==t(this).css("display")&&(e+=1)}),e},AMP.Slider=a}(window,jQuery);