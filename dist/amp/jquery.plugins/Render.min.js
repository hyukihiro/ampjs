/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(t,e){var n,a,r;n=function(t,a){this.$tmpl=t,this.tmpl=Hogan.compile(t.html()),this.ajaxOptions=e.extend(!0,{},n.ajaxOptions,a),_.bindAll(this,"getData","createTemplate","render")},a=function(t,e){var a=new n(t,e);return a.init(),a},n.VERSION="2.0",n.ajaxOptions={url:null,chace:!1,dataType:"json"},r=n.prototype,r.$tmpl=null,r.tmpl=null,r.data=null,r.tmplData=null,r.$el=null,r.$defer=null,n.extend=AMP._extend,r.init=function(){var t=this;return this.$defer=e.stream(t.getData,t.createTemplate,t.render),this.$defer},r.getData=function(){var t=this;return e.ajax(t.ajaxOptions).fail(t.ajaxFail).done(function(e){t.data=e,t.ajaxDone(e)})},r.ajaxDone=function(){return this},r.ajaxFail=function(e,n,a){return AMP.isDevelop&&console.log("xhr:"+e+"\nstatus: "+n+"\nerror: "+a),t.confirm("データの取得に失敗しました。\n再度、ページを読み込み直しますか？")&&location.reload(),this},r.createTemplate=function(t){return this.tmplData=t||this.data,this},r.render=function(){return this.$el=e(this.tmpl.render(this.tmplData)),this.$tmpl.replaceWith(this.$el),this},r.toString=function(){return"[object Render]"},AMP.Render=n,AMP.render=a}(window,jQuery);