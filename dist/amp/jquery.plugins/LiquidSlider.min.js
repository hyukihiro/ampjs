/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(){function a(t,i){this.param=$.extend(!0,{},a.defaults,{$wrap:t,$frame:t.find(".inner"),$slide:t.find(".list"),$items:t.find(".list").children(),$pointer:t.find(".pointer"),$thumbnail:t.find(".thumbnail a"),$prev:t.find(".prev a"),$next:t.find(".next a"),originalLength:t.find(".list").children().length,length:0,clone:2,distance:0,position:0,timerId:null,isAnimate:!1},i),this.param.isInit&&this.init()}var t=a.prototype;a.defaults={isInit:!0,isFlick:!0,current:0,duration:500,ease:"easeOutExpo",timer:0,activeClass:"active",tweenStartCall:$.noop,tweenCall:$.noop,tweenEndCall:$.noop,resizeCall:$.noop,resizeStopCall:$.noop},t.init=function(){var a=this;return a._isInit||(a._isInit=!0,a._createSlideItems(),a._createPointer(),a.setStyle(),a._active(),a.addEventResize(),a.addEventFlick(),a.addEventNext(a.param.$next),a.addEventPrev(a.param.$prev),a.addEventPager(a.param.$thumbnail),a.addEventPager(a.param.$pointer.find("a")),a.timerStart(),a.param.$wrap.hover(function(){a.timerStop()},function(){a.timerStart()})),a},t.setStyle=function(){var a,t,i=this;return i.param.length=i.param.$items.length,i.param.distance=i.param.$items.outerWidth(!0),a=i.param.$wrap.outerWidth(!0),t=a<i.param.distance?0:(a-i.param.distance)/2,i.param.position=t+i.param.distance*i.param.originalLength*-1,i.param.$slide.css({width:i.param.length*i.param.distance,left:i.param.position}),i},t.addEventResize=function(){var a=this;return $(window).on("resize.LiquidSlider",function(){a.setStyle(),a.timerStop(),a.param.resizeCall(a.param)}).on("resizestop.LiquidSlider",function(){a.timerStart(),a.param.resizeStopCall(a.param)}),a},t.addEventFlick=function(){var a=this;return a.param.$items.on("flickmoveX.LiquidSlider",function(t){a._move(t.moveX)}).on("flickcancel.LiquidSlider",function(){a._moveCenter()}).on("flickX.LiquidSlider",function(t){0<t.moveX?a.prev():a.next()}),a},t.addEventNext=function(a){var t=this;return a.on("click.LiquidSlider",function(){return t.next(),!1}),t},t.addEventPrev=function(a){var t=this;return a.on("click.LiquidSlider",function(){return t.prev(),!1}),t},t.addEventPager=function(a){var t=this;return a.on("click.LiquidSlider",function(){return t.moveTo(a.index(this)),!1}),t},t.timerStart=function(a){var t=this;return AMP.isNumber(a)&&(t.param.timer=a),t.timerStop(),0<t.param.timer&&(t.param.timerId=setTimeout(function(){t.next()},t.param.timer+t.param.duration)),t},t.timerStop=function(){return clearTimeout(this.param.timerId),this},t.next=function(){return this._controller(1),this},t.prev=function(){return this._controller(-1),this},t.moveTo=function(a){return AMP.isNumber(a)&&a<this.param.originalLength&&this._controller(a-this.param.current),this},t._controller=function(a){var t=this;if(!t.param.isAnimate){var i=t.param.current+a;t.param.current=0>i?t.param.originalLength-1:i>t.param.originalLength-1?0:i,$.sequence(function(){t.param.isAnimate=!0,t.timerStop()},function(){return t._active(a),t._tween(a)},function(){t.timerStart(),t.param.isAnimate=!1})}return t},t._createSlideItems=function(){for(var a=this.param.$slide[0].innerHTML,t=a,i=0;i<this.param.clone;i+=1)t+=a;return this.param.$slide[0].innerHTML=t,this.param.$items=this.param.$slide.children(),this},t._createPointer=function(){if(this.param.$pointer[0]){for(var a=this.param.$pointer[0].innerHTML,t="",i=0;i<this.param.originalLength;i+=1)t+=a;this.param.$pointer[0].innerHTML=t}return this},t._active=function(a){return a=AMP.isNumber(a)?a:0,this.param.$pointer[0]&&this.param.$pointer.children().removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.$thumbnail[0]&&this.param.$thumbnail.removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.current===this.param.originalLength-1?this.param.$next.addClass(this.param.activeClass):this.param.$next.removeClass(this.param.activeClass),0===this.param.current?this.param.$prev.addClass(this.param.activeClass):this.param.$prev.removeClass(this.param.activeClass),this.param.$slide.children().removeClass(this.param.activeClass).eq(this.param.originalLength+a).addClass(this.param.activeClass),this},t._move=function(a){return this.param.$slide.css({left:this.param.position+a}),this},t._moveCenter=function(){return this.param.$slide.stop().animate({left:this.param.position},100,this.param.ease),this},t._tween=function(a){var t=this;return $.sequence(function(){return t.param.tweenStartCall(t.param)},function(){t.param.tweenCall(t.param);var i=t.param.position+t.param.distance*a*-1;return t.param.$slide.stop().animate({left:i},t.param.duration,t.param.ease)},function(){var i=t.param.$slide,e=i.children();return a>0?i.css({left:t.param.position}).append(e.slice(0,a)):i.css({left:t.param.position}).prepend(e.slice(t.param.length+a)),t.param.tweenEndCall(t.param)})},AMP.LiquidSlider=a}(jQuery);