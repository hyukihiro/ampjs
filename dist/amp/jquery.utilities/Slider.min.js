/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(a,e){function i(a,t){this.param=e.extend(!0,{},i.sliderOptions,{$wrap:a,$frame:a.find(".frame"),$slide:a.find(".slide"),$slideItems:a.find(".slide").children(),$pointer:a.find(".pointer"),$thumbnail:a.find(".thumbnail a"),$prev:a.find(".prev a"),$next:a.find(".next a"),length:a.find(".slide").children().length,displayLength:0,visible:0,distance:0,left:0,slideMaxCount:0,_timerId:null,_isAnimate:!1},t),this.param.isInit&&this.init()}AMP.inherits(i,AMP.$.UIController);var t=i.prototype;i.VERSION="1.0.0",t.className="Slider",i.sliderOptions={$frame:null,$slide:null,$slideItems:null,$pointer:null,$thumbnail:null,$prev:null,$next:null,isInit:!0,isFlick:!0,isLoop:!0,isResize:!1,isTimerCancel:!0,current:0,slideStep:0,timer:0,duration:500,ease:"easeOutQuart",activeClass:"active",tweenBegin:e.noop,tweenCompleat:e.noop,resizeCall:e.noop,resizeStopCall:e.noop},i.get=function(a,e){return new i(a,e)},t.init=function(){var a=this;return this._isInit?this:(a.setParam(),a._createPointer(),a.setPosition(),a.active(),a.addEventResize(),a.addEventTimerCancel(),a.addEventFlick(a.param.$slide),a.addEventNext(a.param.$next),a.addEventPrev(a.param.$prev),a.addEventPager(a.param.$thumbnail),a.addEventPager(a.param.$pointer.find("a")),a.timerStart(),this._isInit=!0,this)},t.setParam=function(){var a,e,i,t=this;return a=t.param.$frame.width(),e=t.param.$slideItems.outerWidth(!0),i=~~(a/e),t.param.distance=0<t.param.slideStep&&t.param.slideStep<=i?t.param.slideStep*e:i*e,t.param.current=Math.ceil(t.param.visible<i?t.param.current/i:t.param.current*i),t.param.visible=i,t.param.displayLength=t.getDisplayLength(),t.param.slideMaxCount=0<t.param.slideStep?Math.ceil(t.param.displayLength/t.param.slideStep)-(t.param.visible-t.param.slideStep):Math.ceil(t.param.displayLength/t.param.visible),this},t.addEventResize=function(){var a=this;return e(window).off("resize.Slider resizestop.Slider").on("resize.Slider",function(){a.param.isResize&&(a.timerStop(),a.setParam(),a.setPosition(),a.param.resizeCall(a.param))}).on("resizestop.Slider",function(){a.param.isResize&&(a._createPointer(),a.addEventPager(a.param.$pointer.find("a")),a.active(),a.timerStart(),a.param.resizeStopCall(a.param))}),this},t.addEventTimerCancel=function(){var a=this;return a.param.$wrap.off("mouseenter.Slider mouseleave.Slider").on("mouseenter.Slider",function(){a.param.isTimerCancel&&a.timerStop()}).on("mouseleave.Slider",function(){a.param.isTimerCancel&&a.timerStart()}),this},t.addEventFlick=function(a){var e=this;return a.off("flickmoveX.Slider flickcancelX.Slider flickX.Slider").on("flickmoveX.Slider",function(a){e._move(a.moveX)}).on("flickcancelX.Slider",function(){e._resetTween()}).on("flickX.Slider",function(a){0<a.moveX?e.prev():e.next()}),this},t.timerStart=function(a){var e=this;return AMP.isNumber(a)&&(e.param.timer=a),e.timerStop(),0<e.param.timer&&(e.param._timerId=setTimeout(function(){e.next()},e.param.timer+e.param.duration)),this},t.timerStop=function(){return clearTimeout(this.param._timerId),this},t._controller=function(a,i){var t=this;if(t.param._isAnimate)return void 0;if(a=i?a<t.param.slideMaxCount?a:t.param.slideMaxCount-1:t.param.current+a,a>-1&&a<t.param.slideMaxCount)t.param.current=a;else{if(!t.param.isLoop)return void 0;t.param.current=a>-1?a-t.param.slideMaxCount:t.param.slideMaxCount+a}t.param._isAnimate=!0,t.param.left=t.param.current*t.param.distance*-1,e.sequence(function(){return t.timerStop(),t.active(),t.param.tweenBegin(t.param)},function(){return t._tween()},function(){return t.param.tweenCompleat(t.param)},function(){t.timerStart(),t.param._isAnimate=!1})},t.getDisplayLength=function(){var a=0;return this.param.$slideItems.each(function(){"none"!==e(this).css("display")&&(a+=1)}),a},t._createPointer=function(){if(this.param.$pointer[0]){for(var a=this.param.$pointer.find(">")[0].outerHTML,e="",i=0;i<this.param.slideMaxCount;i+=1)e+=a;this.param.$pointer[0].innerHTML=e}return this},t.setPosition=function(){return this.param.$slide.css({width:this.param.displayLength*this.param.$slideItems.outerWidth(!0),left:this.param.left}),this},t.active=function(){var a;return a=0<this.param.slideStep?this.param.current*this.param.slideStep:this.param.current*this.param.visible,this.param.$slideItems.removeClass(this.param.activeClass).slice(a,a+this.param.visible).addClass(this.param.activeClass),this.param.$thumbnail[0]&&this.param.$thumbnail.removeClass(this.param.activeClass).slice(a,a+this.param.visible).addClass(this.param.activeClass),this.param.$pointer[0]&&this.param.$pointer.children().removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.current===this.param.slideMaxCount-1?this.param.$next.addClass(this.param.activeClass):this.param.$next.removeClass(this.param.activeClass),0===this.param.current?this.param.$prev.addClass(this.param.activeClass):this.param.$prev.removeClass(this.param.activeClass),this},t._move=function(a){this.param.$slide.velocity("stop").css({left:this.param.left+a})},t._resetTween=function(){return this.param.$slide.velocity("stop").velocity({left:this.param.left},this.param.duration/2,this.param.ease)},t._tween=function(){return this.param.$slide.velocity("stop").velocity({left:this.param.left},this.param.duration,this.param.ease)},AMP.$=AMP.$||{},AMP.$.Slider=i}(window,jQuery);