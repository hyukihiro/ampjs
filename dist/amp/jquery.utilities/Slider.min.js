/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(t,e){function i(t,a){this.param=e.extend(!0,{},i.sliderOptions,{$wrap:t,$frame:t.find(".frame"),$slide:t.find(".slide"),$slideItems:t.find(".slide").children(),$pointer:t.find(".pointer"),$thumbnail:t.find(".thumbnail a"),$prev:t.find(".prev a"),$next:t.find(".next a"),length:t.find(".slide").children().length,_stepLength:null,_liquidLength:null,slideMaxLength:0,distance:0,left:0,_liquidClone:2,_adjustLeft:0,_timerId:null,_isAnimate:!1},a),this.param.isInit&&this.init()}AMP.inherits(i,AMP.$.UIController);var a=i.prototype;i.VERSION="1.0.2",a.className="Slider",i.sliderOptions={$frame:null,$slide:null,$slideItems:null,$pointer:null,$thumbnail:null,$prev:null,$next:null,isInit:!0,isFlick:!0,isResize:!0,isTimerCancel:!0,isLiquid:!1,current:0,slideStep:0,timer:0,activeClass:"active",resizeCall:e.noop,resizeStopCall:e.noop,tween:{easing:"easeOutQuart",duration:500,begin:e.noop,progress:e.noop,complete:e.noop}},i.get=function(t,e){return new i(t,e)},a.init=function(){return this._isInit?this:(this._isInit=!0,this.setParam(),this.createPointer(),this.setPosition(),this.active(),this.addEventResize(),this.addEventTimerCancel(),this.addEventThumbnail(this.param.$thumbnail),this.addEventFlick(this.param.$slide),this.addEventNext(this.param.$next),this.addEventPrev(this.param.$prev),this.addEventPager(this.param.$pointer.find("a")),this.timerStart(),this)},a.setParam=function(){var t=this.param.$frame.width(),e=this.param.$slideItems.outerWidth(!0),i=~~(t/e),a=this.param.slideStep&&this.param.slideStep<i?this.param.slideStep:i;return this.param._stepLength||(this.param._stepLength=a),this.param.current=~~(this.param._stepLength*this.param.current/a),this.param._stepLength=a,this.param.distance=a*e,this.param.slideMaxLength=Math.ceil(this._getDisplayLength()/a),this.param._adjustLeft=this.param.distance<t?~~((this.param.distance-t)/-2):0,this.param.left=this.param.current*this.param.distance*-1,this},a.addEventResize=function(){var t=this;return e(window).off("resize.Slider resizestop.Slider").on("resize.Slider",function(){t.param.isResize&&(t.timerStop(),t.param.resizeCall())}).on("resizestop.Slider",function(){t.param.isResize&&(t.setParam(),t.setPosition(),t.createPointer(),t.addEventPager(t.param.$pointer.find("a")),t.active(),t.timerStart(),t.param.resizeStopCall())}),this},a.addEventThumbnail=function(t){var e=this;return t.on("click.Slider",function(){var i=~~(t.index(this)/e.param._stepLength);return e.moveTo(i),!1}),this},a.addEventTimerCancel=function(){var t=this;return t.param.$wrap.off("mouseenter.Slider mouseleave.Slider").on("mouseenter.Slider",function(){t.param.isTimerCancel&&t.timerStop()}).on("mouseleave.Slider",function(){t.param.isTimerCancel&&t.timerStart()}),this},a.timerStart=function(t){var e=this;return AMP.isNumber(t)&&(e.param.timer=t),e.timerStop(),0<e.param.timer&&(e.param._timerId=setTimeout(function(){e.next()},e.param.timer+e.param.tween.duration)),this},a.timerStop=function(){return clearTimeout(this.param._timerId),this},a._controller=function(t,i){var a=this;return a.param._isAnimate?void 0:(0>t?t=a.param.slideMaxLength-1:t>=a.param.slideMaxLength&&(t=0),a.param.current=t,a.param.left=a.param.current*a.param.distance*-1,void(i?a.setPosition():e.sequence(function(){a.param._isAnimate=!0,a.timerStop(),a.active()},function(){return a._tween()},function(){a.timerStart(),a.param._isAnimate=!1})))},a._getDisplayLength=function(){var t=0;return this.param.$slideItems.each(function(){"none"!==e(this).css("display")&&(t+=1)}),t},a.createPointer=function(){if(this.param.$pointer[0]){var t=this.param.$pointer.find(">")[0].outerHTML,e="",i=0;for(e+=t;i<this.param.slideMaxLength;i+=1);this.param.$pointer[0].innerHTML=e}return this},a.setPosition=function(){return this.param.$slide.css({width:this._getDisplayLength()*this.param.$slideItems.outerWidth(!0),left:this.param.left+this.param._adjustLeft}),this},a.active=function(){var t=this.param.current*this.param._stepLength;return this.param.$slideItems.removeClass(this.param.activeClass).slice(t,t+this.param._stepLength).addClass(this.param.activeClass),this.param.$thumbnail[0]&&this.param.$thumbnail.removeClass(this.param.activeClass).slice(t,t+this.param._stepLength).addClass(this.param.activeClass),this.param.$pointer[0]&&this.param.$pointer.children().removeClass(this.param.activeClass).eq(this.param.current).addClass(this.param.activeClass),this.param.current===this.param.slideMaxLength-1?this.param.$next.addClass(this.param.activeClass):this.param.$next.removeClass(this.param.activeClass),0===this.param.current?this.param.$prev.addClass(this.param.activeClass):this.param.$prev.removeClass(this.param.activeClass),this},a._move=function(t){this.param.$slide.velocity("stop").css({left:this.param.left+this.param._adjustLeft+t})},a._resetTween=function(){return this.param.$slide.velocity("stop").velocity({left:this.param.left+this.param._adjustLeft},this.param.tween.duration/2,this.param.tween.easing)},a._tween=function(){return this.param.$slide.velocity("stop").velocity({left:this.param.left+this.param._adjustLeft},this.param.tween)},AMP.$=AMP.$||{},AMP.$.Slider=i}(window,jQuery);