/**
 * AMP JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/yoshihitofujiwara/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


var AMP=AMP||{};!function(e,t){function i(e,a){this.param=t.extend(!0,{},i.sliderOptions,{$wrap:e,$frame:e.find(".frame"),$slide:e.find(".slide"),$slideItems:e.find(".slide").children(),$pointer:e.find(".pointer"),$thumbnail:e.find(".thumbnail a"),$prev:e.find(".prev a"),$next:e.find(".next a"),length:e.find(".slide").children().length,displayLength:0,visible:0,distance:0,_isAnimate:!1},a),this.counter=new AMP.Counter(this.param.current,e.find(".slide").children().length,this.param.isLoop),delete this.param.current,this.vector=new AMP.Vector,this.timer=new AMP.Timer(this.param.timer),delete this.param.timer,this.param.isInit&&this.init()}AMP.inherits(i,AMP.$.UIController);var a=i.prototype;i.VERSION="1.0.0",a.className="Slider",i.sliderOptions={$frame:null,$slide:null,$slideItems:null,$pointer:null,$thumbnail:null,$prev:null,$next:null,isInit:!0,isFlick:!0,isLoop:!0,isResize:!1,isTimerCancel:!0,current:0,slideStep:0,timer:0,duration:500,ease:"easeOutQuart",activeClass:"active",tweenBegin:t.noop,tweenCompleat:t.noop,resizeCall:t.noop,resizeStopCall:t.noop},i.get=function(e,t){return new i(e,t)},a.init=function(){var e=this;return this._isInit?this:(e.setParam(),e._createPointer(),e.setPosition(),e.active(),e.addEventResize(),e.addEventTimerCancel(),e.addEventFlick(e.param.$slide),e.addEventNext(e.param.$next),e.addEventPrev(e.param.$prev),e.addEventPager(e.param.$thumbnail),e.addEventPager(e.param.$pointer.find("a")),e.timer.addCallback(e.next),e.setTimer(),this._isInit=!0,this)},a.setParam=function(){var e,t,i,a=this;e=a.param.$frame.width(),t=a.param.$slideItems.outerWidth(!0),i=~~(e/t),a.param.distance=0<a.param.slideStep&&a.param.slideStep<=i?a.param.slideStep*t:i*t;var r=0;r=Math.ceil(a.param.visible<i?a.counter.getCount()/i:a.counter.getCount()*i),a.param.visible=i,a.param.displayLength=a.getDisplayLength();var s=0;return s=0<a.param.slideStep?Math.ceil(a.param.displayLength/a.param.slideStep)-(a.param.visible-a.param.slideStep):Math.ceil(a.param.displayLength/a.param.visible),a.counter.setCount(r),a.counter.setLength(s),this},a.addEventResize=function(){var e=this;return t(window).off("resize.Slider resizestop.Slider").on("resize.Slider",function(){e.param.isResize&&(e.timer.stop(),e.setParam(),e.setPosition(),e.param.resizeCall(e.param))}).on("resizestop.Slider",function(){e.param.isResize&&(e._createPointer(),e.addEventPager(e.param.$pointer.find("a")),e.active(),e.timer.start(),e.param.resizeStopCall(e.param))}),this},a.addEventTimerCancel=function(){var e=this;return e.param.$wrap.off("mouseenter.Slider mouseleave.Slider").on("mouseenter.Slider",function(){e.param.isTimerCancel&&e.timer.stop()}).on("mouseleave.Slider",function(){e.param.isTimerCancel&&e.timer.start()}),this},a.addEventFlick=function(e){var t=this;return e.off("flickmoveX.Slider flickcancelX.Slider flickX.Slider").on("flickmoveX.Slider",function(e){t._move(e.moveX)}).on("flickcancelX.Slider",function(){t._resetTween()}).on("flickX.Slider",function(e){0<e.moveX?t.prev():t.next()}),this},a.setTimer=function(e){return this.timer.stop(),AMP.isNumber(e)||(e=this.timer.interval),e>0&&this.timer.start(e+this.param.duration),this},a._controller=function(e,i){var a=this;if(a.param._isAnimate)return void 0;if(e=i?e<a.counter.getLength()?e:a.counter.getLength()-1:a.counter.getCount()+e,e>-1&&e<a.counter.getLength())a.counter.setCount(e);else{if(!a.param.isLoop)return void 0;a.counter.getCount()=e>-1?e-a.counter.getLength():a.counter.getLength()+e}a.param._isAnimate=!0,a.vector.set(a.counter.getCount()*a.param.distance*-1),t.sequence(function(){return a.timer.stop(),a.active(),a.param.tweenBegin(a.param)},function(){return a._tween()},function(){return a.param.tweenCompleat(a.param)},function(){a.timer.start(),a.param._isAnimate=!1})},a.getDisplayLength=function(){var e=0;return this.param.$slideItems.each(function(){"none"!==t(this).css("display")&&(e+=1)}),e},a._createPointer=function(){if(this.param.$pointer[0]){for(var e=this.param.$pointer.find(">")[0].outerHTML,t="",i=0,a=this.counter.getLength();a>i;i+=1)t+=e;this.param.$pointer[0].innerHTML=t}return this},a.setPosition=function(){return this.param.$slide.css({width:this.param.displayLength*this.param.$slideItems.outerWidth(!0),left:this.vector.x}),this},a.active=function(){var e;return e=0<this.param.slideStep?this.counter.getCount()*this.param.slideStep:this.counter.getCount()*this.param.visible,this.param.$slideItems.removeClass(this.param.activeClass).slice(e,e+this.param.visible).addClass(this.param.activeClass),this.param.$thumbnail[0]&&this.param.$thumbnail.removeClass(this.param.activeClass).slice(e,e+this.param.visible).addClass(this.param.activeClass),this.param.$pointer[0]&&this.param.$pointer.children().removeClass(this.param.activeClass).eq(this.counter.getCount()).addClass(this.param.activeClass),this.counter.getCount()===this.counter.getLength()-1?this.param.$next.addClass(this.param.activeClass):this.param.$next.removeClass(this.param.activeClass),0===this.counter.getCount()?this.param.$prev.addClass(this.param.activeClass):this.param.$prev.removeClass(this.param.activeClass),this},a._move=function(e){this.param.$slide.velocity("stop").css({left:this.vector.x+e})},a._resetTween=function(){return this.param.$slide.velocity("stop").velocity({left:this.vector.x},this.param.duration/2,this.param.ease)},a._tween=function(){return this.param.$slide.velocity("stop").velocity({left:this.vector.x},this.param.duration,this.param.ease)},AMP.$=AMP.$||{},AMP.$.Slider=i}(window,jQuery);