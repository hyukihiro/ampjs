/*
 * Twn.js v0.9 beta
 *
 * Copyright (c) 2015 Yuichiroh Arai
 * Released under the MIT license
 * http://opensource.org/licenses/mit-license.php
 */
var Twn;!function(t){function e(e,o,i){return void 0===i&&(i=null),o instanceof n||(o=new t.Void),i instanceof n||(i=new t.Void),e?o:i}var n=function(){function e(){var t=this;this._onComplete=function(){t._callback&&t._callback()}}return e.SET_SPEED=function(t){e.SPEED=t},e.prototype.destroy=function(){return this.stop(),delete this._callback,this},e.prototype.play=function(){return this},e.prototype.stop=function(){return this},e.prototype.delay=function(e){return e>0?new t.List([new t.Wait(e),this],!1):this},e.TIME_UNIT=1e3,e.SPEED=1,e}();t.Command=n,t.ifValue=e}(Twn||(Twn={}));var __extends=this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},Twn;!function(t){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return new o(t,!1)}function n(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return new o(t,!0)}var o=function(e){function n(n,o){var i=this;e.call(this),this._onComplete=function(){var t;++i._count,i._isParallel?i._count>=i._length&&i._callback&&i._callback():i._count<i._length?(t=i._list[i._count],t.play()):i._callback&&i._callback()};var s,r,a;for(r=!n||n.length<1?0:n.length,this._list=[],s=0;r>s;s++)a=n[s],a instanceof t.Command&&(a._callback=this._onComplete,this._list.push(a));this._isParallel=o,0==this._list.length&&(a=new t.Void,a._callback=this._onComplete,this._list.push(a)),this._length=this._list.length}return __extends(n,e),n.prototype.destroy=function(){var t;for(e.prototype.destroy.call(this),t=0;t<this._length;t++)this._list[t].destroy();return delete this._list,delete this._isParallel,delete this._length,delete this._count,this},n.prototype.play=function(){var t,e;if(0==this._length)return this;for(this._count=0,t=0;t<this._length;t++)if(e=this._list[t],this._isParallel)e.play();else if(t==this._count){e.play();break}return this},n.prototype.stop=function(){var t,e;if(0==this._length)return this;for(t=0;t<this._length;t++)e=this._list[t],e.stop();return this},n}(t.Command);t.List=o,t.serial=e,t.parallel=n}(Twn||(Twn={}));var Twn;!function(t){function e(e){return e>0?new n(e):new t.Void}var n=function(e){function n(t){var n=this;e.call(this),this._onComplete=function(){delete n._timer,n._callback&&n._callback()},this._wait=t}return __extends(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),delete this._wait,delete this._timer,this},n.prototype.play=function(){return this._timer=setTimeout(this._onComplete,this._wait*t.Command.TIME_UNIT/(t.Command.SPEED?t.Command.SPEED:.01)),this},n.prototype.stop=function(){return this._timer&&clearTimeout(this._timer),delete this._timer,this},n}(t.Command);t.Wait=n,t.wait=e}(Twn||(Twn={}));var Twn;!function(t){function e(t,e,n){return new s(t,e,n,!1)}function n(t,e,n){return new s(t,e,n,!0)}function o(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return new s(console.log,t,console,!1)}function i(e){return new s(t.Command.SET_SPEED,[e],t.Command,!1)}var s=function(t){function e(e,n,o,i){var s=this;t.call(this),this._onComplete=function(){s._callback&&s._isPlay&&s._callback()},n instanceof Array||(n=[n]),this._func=e,this._args=n,i&&(this._args&&this._args.unshift?this._args.unshift(this._onComplete):this._args=[this._onComplete]),this._thisObject=o,this._async=i,this._isPlay=!1}return __extends(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),delete this._func,delete this._args,delete this._thisObject,delete this._async,this},e.prototype.play=function(){return this._isPlay=!0,this._func&&(this._thisObject?this._func.apply(this._thisObject,this._args):this._func.apply(window,this._args)),this._async||this._onComplete(),this},e.prototype.stop=function(){return this._isPlay=!1,this},e}(t.Command);t.Func=s,t.func=e,t.funcAsync=n,t.log=o,t.speed=i}(Twn||(Twn={}));var Twn;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),this},e.prototype.play=function(){return this._onComplete(),this},e}(t.Command);t.Void=e}(Twn||(Twn={}));var Twn;!function(t){function e(t,e){return new n(t,e)}var n=function(e){function n(n,o){var i=this;e.call(this),this._onComplete=function(){++i._current,0==i._total||i._current<i._total?i._command.play():i._callback&&i._callback()},o instanceof t.Command&&(this._current=0,this._total=1>n?0:0|n,o._callback=this._onComplete,this._command=o)}return __extends(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),delete this._command,delete this._total,delete this._current,this},n.prototype.play=function(){return this._command?(this._current=0,this._command.play(),this):this},n.prototype.stop=function(){return this._command?(this._command.stop(),this):this},n}(t.Command);t.Loop=n,t.loop=e}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e,n,i){return new o(t,e,n,i)}var o=function(e){function n(t,n,o,i){e.call(this),this._query=t,this._duration=n,this._ease=o,this._props=i}return __extends(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),delete this._query,delete this._duration,delete this._ease,delete this._props,this},n.prototype.play=function(){return this._query.animate(this._props,{duration:this._duration*t.Command.TIME_UNIT/(t.Command.SPEED?t.Command.SPEED:.01),easing:this._ease,queue:!1,complete:this._onComplete}),this},n.prototype.stop=function(){return this._query.stop(),this},n}(t.Command);e.Tween=o,e.tween=n}(e=t.jq||(t.jq={}))}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e){return new r(t,e,"css")}function o(t,e){return new r(t,e,"attr")}function i(t,e){return new r(t,e,"addClass")}function s(t,e){return new r(t,e,"removeClass")}var r=function(t){function e(e,n,o){t.call(this),this._query=e,this._props=n,this._mode=o}return __extends(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),delete this._query,delete this._props,delete this._mode,this},e.prototype.play=function(){switch(this._mode){case"css":this._query.css(this._props);break;case"attr":this._query.attr(this._props);break;case"addClass":this._query.addClass(this._props);break;case"removeClass":this._query.removeClass(this._props)}return this._onComplete(),this},e}(t.Command);e.Prop=r,e.css=n,e.attr=o,e.addClass=i,e.removeClass=s}(e=t.jq||(t.jq={}))}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e){return new o(t,e)}var o=function(t){function e(e,n){var o=this;t.call(this),this._onComplete=function(){o._callback&&o._callback()},this._target=e,this._props=n}return __extends(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),delete this._target,delete this._props,this},e.prototype.play=function(){return t.prototype.play.call(this),this._target.set(this._props),this._onComplete(),this},e.prototype.stop=function(){return t.prototype.stop.call(this),this},e}(t.Command);e.Prop=o,e.prop=n}(e=t.cjs||(t.cjs={}))}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e,n,i,s){return void 0===s&&(s=0),new o(t,e,n,i,s)}var o=function(e){function n(t,n,o,i,s){var r=this;e.call(this),this._onComplete=function(){delete r._tween,r._callback&&r._callback()},s||(s=0),s>1&&(s=1),this._target=t,this._duration=n,this._ease=o,this._prop=i,this._position=s}return __extends(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),delete this._target,delete this._duration,delete this._ease,delete this._prop,delete this._position,delete this._tween,this},n.prototype.play=function(){return e.prototype.play.call(this),this._tween=createjs.Tween.get(this._target).to(this._prop,this._duration*t.Command.TIME_UNIT/(t.Command.SPEED?t.Command.SPEED:.01),this._ease),this._position>0&&this._tween.setPosition(this._position*t.Command.TIME_UNIT/(t.Command.SPEED?t.Command.SPEED:.01),createjs.Tween.NONE),this._tween.call(this._onComplete),this},n.prototype.stop=function(){return e.prototype.stop.call(this),this._tween&&this._tween.setPaused(!0),delete this._tween,this},n}(t.Command);e.Tween=o,e.tween=n}(e=t.cjs||(t.cjs={}))}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e,n,i){return new o(t,e,n,i)}var o=function(e){function n(t,n,o,i){e.call(this),this._query=t,this._duration=n,this._ease=o,this._props=i}return __extends(n,e),n.prototype.destroy=function(){return e.prototype.destroy.call(this),delete this._query,delete this._duration,delete this._ease,delete this._props,this},n.prototype.play=function(){return this._query.velocity(this._props,{duration:this._duration*t.Command.TIME_UNIT/(t.Command.SPEED?t.Command.SPEED:.01),easing:this._ease,queue:!1,complete:this._onComplete}),this},n.prototype.stop=function(){return this._query.velocity("stop"),this},n}(t.Command);e.Tween=o,e.tween=n}(e=t.vel||(t.vel={}))}(Twn||(Twn={}));var Twn;!function(t){var e;!function(e){function n(t,e){return new o(t,e)}var o=function(t){function e(e,n){t.call(this),this._query=e,this._props=n}return __extends(e,t),e.prototype.destroy=function(){return t.prototype.destroy.call(this),delete this._query,delete this._props,this},e.prototype.play=function(){for(var t in this._props)$.Velocity.hook(this._query,t,this._props[t]);return this._onComplete(),this},e}(t.Command);e.Prop=o,e.hook=n}(e=t.vel||(t.vel={}))}(Twn||(Twn={}));