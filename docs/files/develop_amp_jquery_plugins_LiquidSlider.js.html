<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>develop\amp\jquery\plugins\LiquidSlider.js - AMP.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="AMP.js"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AMP.Array.html">AMP.Array</a></li>
            
                <li><a href="../classes/AMP.BASE_CLASS.html">AMP.BASE_CLASS</a></li>
            
                <li><a href="../classes/AMP.Debug.html">AMP.Debug</a></li>
            
                <li><a href="../classes/AMP.Ease.html">AMP.Ease</a></li>
            
                <li><a href="../classes/AMP.Events.html">AMP.Events</a></li>
            
                <li><a href="../classes/AMP.Extend.html">AMP.Extend</a></li>
            
                <li><a href="../classes/AMP.FontResize.html">AMP.FontResize</a></li>
            
                <li><a href="../classes/AMP.Has.html">AMP.Has</a></li>
            
                <li><a href="../classes/AMP.Is.html">AMP.Is</a></li>
            
                <li><a href="../classes/AMP.Location.html">AMP.Location</a></li>
            
                <li><a href="../classes/AMP.Mediaquery.html">AMP.Mediaquery</a></li>
            
                <li><a href="../classes/AMP.Storage.html">AMP.Storage</a></li>
            
                <li><a href="../classes/AMP.String.html">AMP.String</a></li>
            
                <li><a href="../classes/AMP.Utility.html">AMP.Utility</a></li>
            
                <li><a href="../classes/BoxHover.html">BoxHover</a></li>
            
                <li><a href="../classes/Ease.html">Ease</a></li>
            
                <li><a href="../classes/Fallback.html">Fallback</a></li>
            
                <li><a href="../classes/FlatHeight.html">FlatHeight</a></li>
            
                <li><a href="../classes/jQuery.html">jQuery</a></li>
            
                <li><a href="../classes/LiquidSlider.html">LiquidSlider</a></li>
            
                <li><a href="../classes/Loader.html">Loader</a></li>
            
                <li><a href="../classes/Render.html">Render</a></li>
            
                <li><a href="../classes/Rollover.html">Rollover</a></li>
            
                <li><a href="../classes/Scroll.html">Scroll</a></li>
            
                <li><a href="../classes/ScrollToggle.html">ScrollToggle</a></li>
            
                <li><a href="../classes/Slider.html">Slider</a></li>
            
                <li><a href="../classes/SmoothScroll.html">SmoothScroll</a></li>
            
                <li><a href="../classes/XXX_Ease.html">XXX_Ease</a></li>
            
                <li><a href="../classes/XXX_Layer.html">XXX_Layer</a></li>
            
                <li><a href="../classes/XXX_Loader.html">XXX_Loader</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: develop\amp\jquery\plugins\LiquidSlider.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var AMP = AMP || {};

(function(root){

  // &#x27;use strict&#x27;;


  /*----------------------------------------------------------------------
    @constructor
  ----------------------------------------------------------------------*/

  /**
   * &lt;h4&gt;リキッドスライダー&lt;/h4&gt;
   *
   * @constructor
   * @class LiquidSlider
   * @param {jQuery} $wrap   スライダーラッパー要素
   * @param {Object} options オプション値
   */
	function LiquidSlider($wrap, options){
		this.param = $.extend(
			true,
			{},
			LiquidSlider.defaults,
			{
        $wrap         : $wrap,
        $frame        : $wrap.find(&#x27;.inner&#x27;),
        $slide        : $wrap.find(&#x27;.list&#x27;),
        $items        : $wrap.find(&#x27;.list&#x27;).children(),
        $pointer      : $wrap.find(&#x27;.pointer&#x27;),
        $thumbnail    : $wrap.find(&#x27;.thumbnail a&#x27;),
        $prev         : $wrap.find(&#x27;.prev a&#x27;),
        $next         : $wrap.find(&#x27;.next a&#x27;),
        originalLength: $wrap.find(&#x27;.list&#x27;).children().length,
        length        : 0,
        clone         : 2,
        distance      : 0,
        position      : 0,
        timerId       : null,
        isAnimate     : false
			},
			options
		);

		if(this.param.isInit){
			this.init();
		}
	}

	// prototype
	var p = LiquidSlider.prototype;



	/*--------------------------------------------------------------------------
		@property
	--------------------------------------------------------------------------*/

	/**
	 * オプションのデフォルト値
	 * @static
	 * @property defaults
	 * @type {Object}
	 */
	LiquidSlider.defaults = {
    isInit        : true,
    isFlick       : true,
    current       : 0,
    duration      : 500,
    ease          : &#x27;easeOutExpo&#x27;,
    timer         : 0,
    activeClass   : &#x27;active&#x27;,
    tweenStartCall: $.noop,
    tweenCall     : $.noop,
    tweenEndCall  : $.noop,
    resizeCall    : $.noop,
    resizeStopCall: $.noop
	};



	/*--------------------------------------------------------------------------
		@method
	--------------------------------------------------------------------------*/

	/**
	 * 初期化
	 * @method init
	 * @return {LiquidSlider}
	 */
	p.init = function(){
		var self = this;
		if(!self._isInit){
			self._isInit = true;

			// 要素、パラメーター設定
			self._createSlideItems();
			self._createPointer();
			self.setStyle();
			self._active();

			// イベント設定
			self.addEventResize();
			self.addEventFlick();
			self.addEventNext(self.param.$next);
			self.addEventPrev(self.param.$prev);
			self.addEventPager(self.param.$thumbnail);
			self.addEventPager(self.param.$pointer.find(&#x27;a&#x27;));
			self.timerStart();

			self.param.$wrap.hover(
				function(){ self.timerStop();},
				function(){ self.timerStart();}
			);
		};

		return self;
	};


	/**
	 * パラメーター、スタイルの設定
	 * @method setStyle
	 * @return {LiquidSlider}
	 */
	p.setStyle = function(){
		var self = this,
		stageWidth, margin;

		self.param.length = self.param.$items.length;
		self.param.distance = self.param.$items.outerWidth(true);

		// ステージの幅
		stageWidth = self.param.$wrap.outerWidth(true);

		// 中央センター調整
		margin = stageWidth &lt; self.param.distance ? 0 : (stageWidth - self.param.distance) / 2;

		// 表示位置
		self.param.position = margin + (self.param.distance * self.param.originalLength * -1);

		// 現在のアイテムを中央に配置
		self.param.$slide.css({
			width: self.param.length * self.param.distance,
			left : self.param.position
		});

		// フレームの高さを設定
		// self.param.$frame.css({
		// 	height: self.param.$items.eq(self.param.current).outerHeight(true)
		// });

		return self;
	};


	/* events
	-----------------------------------------------------------------*/

	/**
	 * リサイズイベント
	 * @method addEventResize
	 * @return {LiquidSlider}
	 */
	p.addEventResize = function(){
		var self = this;

		$(window)
		.on(&#x27;resize.LiquidSlider&#x27;, function(){
			self.setStyle();
			self.timerStop();
			self.param.resizeCall(self.param);
		})
		.on(&#x27;resizestop.LiquidSlider&#x27;, function(){
			self.timerStart();
			self.param.resizeStopCall(self.param);
		});

		return self;
	};


  /**
   * フリックイベント
   * @method addEventFlick
   * @return {LiquidSlider}
   */
	p.addEventFlick = function(){
		var self = this;

		self.param.$items
		.on(&#x27;flickmoveX.LiquidSlider&#x27;, function(event){
			self._move(event.moveX);
		})
		.on(&#x27;flickcancel.LiquidSlider&#x27;, function(){
			self._moveCenter();
		})
		.on(&#x27;flickX.LiquidSlider&#x27;, function(event){
			if(0 &lt; event.moveX){
				self.prev();
			} else {
				self.next();
			}
		})

		return self;
	};


	/**
	 * ネクストボタンイベント
	 * @method addEventNext
	 * @param {jQuery} $trigger トリガー要素
	 * @return {LiquidSlider}
	 */
	p.addEventNext = function($trigger){
		var self = this;
		$trigger.on(&#x27;click.LiquidSlider&#x27;, function(){
			self.next();
			return false;
		});

		return self;
	};


	/**
	 * プレブボタンイベント
	 * @method addEventPrev
	 * @param {jQuery} $trigger トリガー要素
	 * @return {LiquidSlider}
	 */
	p.addEventPrev = function($trigger){
		var self = this;

		$trigger.on(&#x27;click.LiquidSlider&#x27;, function(){
			self.prev();
			return false;
		});

		return self;
	};


	/**
	 * ページャーボタンイベント
	 * @method addEventPrev
	 * @param {jQuery} $trigger トリガー要素
	 * @return {LiquidSlider}
	 */
	p.addEventPager = function($trigger){
		var self = this;

		$trigger.on(&#x27;click.LiquidSlider&#x27;, function(){
			self.moveTo($trigger.index(this));
			return false;
		});

		return self;
	};


	/**
	 * タイマースタート
	 * @method timerStart
	 * @param  {Number} num セットするタイマー値(省略可)
	 * @return {LiquidSlider}
	 */
	p.timerStart = function(num){
		var self = this;

		if(AMP.isNumber(num)){
			self.param.timer = num;
		}

		self.timerStop();

		if(0 &lt; self.param.timer){
			self.param.timerId = setTimeout(function(){
				self.next();
			}, self.param.timer + self.param.duration);
		}

		return self;
	};


	/**
	 * タイマー停止
	 * @method timerStop
	 * @return {LiquidSlider}
	 */
	p.timerStop = function(){
		clearTimeout(this.param.timerId);
		return this;
	};


	/* controllers
	-----------------------------------------------------------------*/

	/**
	 * 次へスライド
	 * @method next
	 * @return {LiquidSlider}
	 */
	p.next = function(){
		this._controller(1);
		return this;
	};


	/**
	 * 前へスライド
	 * @method prev
	 * @return {LiquidSlider}
	 */
	p.prev = function(){
		this._controller(-1);
		return this;
	};


	/**
	 * 指定したスライドインデックスへスライド
	 * @method moveTo
	 * @param  {Number} num 指定したスライドインデックス
	 * @return {LiquidSlider}
	 */
	p.moveTo = function(num){
		if(AMP.isNumber(num) &amp;&amp; num &lt; this.param.originalLength){
			this._controller(num - this.param.current);
		}
		return this;
	};



	/**
	 * コントローラー
   * @private
	 * @method _controller
	 * @param  {Number} step スライドするステップ数
	 * @return {LiquidSlider}
	 */
	p._controller = function(step){
		var self = this;

		if(!self.param.isAnimate){
			var next = self.param.current + step;

			if(next &lt; 0){
				self.param.current = self.param.originalLength - 1;
			} else if(next &gt; self.param.originalLength - 1){
				self.param.current = 0;
			} else {
				self.param.current = next;
			}

			$.sequence(
				function(){
					self.param.isAnimate = true;
					self.timerStop();
				},
				function(){
					self._active(step);
					return self._tween(step);
				},
				function(){
					self.timerStart();
					self.param.isAnimate = false;
				}
			);
		}

		return self;
	};


	/* views
	-----------------------------------------------------------------*/

	/**
	 * スライドアイテムの生成
	 * @private
	 * @method _createSlideItems
	 * @return {LiquidSlider}
	 */
	p._createSlideItems = function(){
		var slideHTML = this.param.$slide[0].innerHTML,
		print = slideHTML,
		i = 0;

		for(; i &lt; this.param.clone; i += 1){
			print += slideHTML;
		}
		this.param.$slide[0].innerHTML = print;
		this.param.$items = this.param.$slide.children();

		return this;
	};


	/**
	 * ポインターの生成
	 * @private
	 * @method _createPointer
	 * @return {LiquidSlider}
	 */
	p._createPointer = function(){
		if(this.param.$pointer[0]){
			var pointerHTML = this.param.$pointer[0].innerHTML,
			print = &#x27;&#x27;,
			i = 0;

			for(; i &lt; this.param.originalLength; i += 1){
				print += pointerHTML;
			}
			this.param.$pointer[0].innerHTML = print;
		}

		return this;
	};


	/**
	 * アクティブな要素にクラスを振ります
	 * @private
	 * @method _active
	 * @return {LiquidSlider}
	 */
	p._active = function(step){
		step = AMP.isNumber(step) ? step : 0;

		// pointer
		if(this.param.$pointer[0]){
			this.param.$pointer.children().removeClass(this.param.activeClass)
			.eq(this.param.current).addClass(this.param.activeClass);
		}

		// thumbnail
		if(this.param.$thumbnail[0]){
			this.param.$thumbnail.removeClass(this.param.activeClass)
			.eq(this.param.current).addClass(this.param.activeClass);
		};

		// next
		if(this.param.current === this.param.originalLength - 1){
			this.param.$next.addClass(this.param.activeClass);
		} else {
			this.param.$next.removeClass(this.param.activeClass);
		}

		// prev
		if(this.param.current === 0){
			this.param.$prev.addClass(this.param.activeClass);
		} else {
			this.param.$prev.removeClass(this.param.activeClass);
		}

		// items
		this.param.$slide.children().removeClass(this.param.activeClass)
		.eq(this.param.originalLength + step)
		.addClass(this.param.activeClass);

		return this;
	};


	/**
	 * x値分へスライド
	 * @method _move
	 * @param  {Number} x スライドするx座標値
	 * @return {LiquidSlider}
	 */
	p._move = function(x){
		this.param.$slide.css({left: this.param.position + x});
		return this;
	};


	/**
	 * センターポジションへスライドアニメーション
	 * @method _moveCenter
	 * @return {LiquidSlider}
	 */
	p._moveCenter = function(){
		this.param.$slide.stop().animate({left: this.param.position}, 100, this.param.ease);
		return this;
	};


	/**
	 * スライドアニメーションを実行
	 * @private
	 * @method _active
	 * @return {jQuery.Deferred}
	 */
	p._tween = function(step){
		var self = this;

		return $.sequence(

			// スライド前のコールバックを実行
			function(){
				return self.param.tweenStartCall(self.param);
			},

			// スライドとコールバックを実行
			function(){
				self.param.tweenCall(self.param);

				var x = self.param.position + (self.param.distance * step * -1);
				return self.param.$slide.stop().animate({left: x}, self.param.duration, self.param.ease);
			},

			// 要素のセンタリングとスライド完了コールバックを実行
			function(){
				var $slide = self.param.$slide,
				$items = $slide.children();

				if(0 &lt; step){
					$slide.css({left: self.param.position}).append($items.slice(0, step));
				} else {
					$slide.css({left: self.param.position}).prepend($items.slice(self.param.length + step));
				}

				return self.param.tweenEndCall(self.param);
			}
		);
	};



	/*--------------------------------------------------------------------------
		exports
	--------------------------------------------------------------------------*/

	AMP.LiquidSlider = LiquidSlider;



}(jQuery));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
