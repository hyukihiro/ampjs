/**
 * amp JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/cutupworks/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(e){e.each({mouseenter:"slipin",mouseleave:"slipout"},function(t,n){e.event.special[n]={setup:function(){e(this).on(t,e.event.special[n].handler)},teardown:function(){e(this).off(t,e.event.special[n].handler)},handler:function(t){var i={},r=e(this),s=r.offset(),u=r.width(),o=r.height(),a=(t.pageX-s.left-u/2)*(u>o?o/u:1),c=(t.pageY-s.top-o/2)*(o>u?u/o:1),f=Math.round((Math.atan2(c,a)*(180/Math.PI)+180)/90+3)%4;switch(i.originalEvent=t,i.x=a,i.y=c,i.type=n,i.direction=f,f){case 0:i.direction="top";break;case 1:i.direction="right";break;case 2:i.direction="bottom";break;case 3:i.direction="left"}r.trigger(i)}},e.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}}),e.fn.slip=function(e,t){return this.slipin(e).slipout(t||e)}}(jQuery),function(e){e.each({resize:"resizestop",scroll:"scrollstop"},function(t,n){e.event.special[n]={data:{eventType:n,timer:100,timerId:null},setup:function(i){var r=e.extend({},e.event.special[n].data,i);e(this).on(t,function(){e.event.special[n].handler(r)})},teardown:function(){e(this).off(t)},handler:function(t){clearTimeout(t.timerId),t.timerId=setTimeout(function(){e(this).trigger(t.eventType)},t.timer)}},e.fn[n]=function(e,t){return arguments.length>0?this.on(n,null,e,t):this.trigger(n)}})}(jQuery),function(e){e.sequence=function(){var t,n,i=new e.Deferred,r=new e.Deferred;t=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),t[t.length]=i.resolve;for(var s=0,u=t.length;u>s;s+=1)e.isFunction(t[s])&&(n=(n?n:r).pipe(e.proxy(function(){return this()},t[s])).fail(i.reject));return r.resolve(),i.promise()},e.stream=function(){var t,n=new e.Deferred,i=0;t=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),t[t.length]=n.resolve;var r=function(s,u){e.when(s(u)).fail(n.reject).done(function(e){n.notify(e),i+=1,i!==t.length&&r(t[i],e)})};return r(t[i]),n.promise()}}(jQuery),function(e){e.each({css:"qCss",attr:"qAttr"},function(t,n){e.fn[n]=function(n,i,r){var s=this;return e.isFunction(i)&&(r=i,i=void 0),s.queue(function(){s[t](n,i).dequeue(),e.isFunction(r)&&r(s)})}}),e.each({addClass:"qAddClass",removeClass:"qRemoveClass"},function(t,n){e.fn[n]=function(n,i){var r=this;return r.queue(function(){r[t](n).dequeue(),e.isFunction(i)&&i(r)})}}),e.fn.qCall=function(e){var t=this;return t.queue(function(){e(),t.dequeue()})},e.fn.replaceAttr=function(e,t,n){var i=this.attr(e);return i?(n=n?n:"",this.attr(e,i.replace(t,n))):this},e.fn.getExt=function(e){var t=this.attr(e);return t.indexOf(".")>-1?t.substring(t.lastIndexOf(".")):void 0}}(jQuery);