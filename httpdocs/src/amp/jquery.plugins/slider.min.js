/**
 * amp JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/cutupworks/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(e){common.slider=function(t,i){function r(){this.param=n,this.init()}var n=e.extend(!0,{},{$frame:t.find(".inner"),$slide:t.find(".list"),$items:t.find(".list").children(),$pointer:t.find(".pointer li"),$thumbnail:t.find(".thumbnail a"),$prev:t.find(".prev a"),$next:t.find(".next a"),type:t.find(".thumbnail")[0]&&t.find(".thumbnail").attr("class").match(/all-rover|all-alpha/),stageWidth:0,distance:0,total:0,max:0,visible:1,isAnimate:!1,isFlick:!0,activeClass:"active",timerId:null,current:0,duration:500,easing:"easeOutExpo",timer:0,loop:!1,resizeCall:e.noop,resizeStopCall:e.noop,tweenStartCall:e.noop,tweenCall:e.noop,tweenStopCall:e.noop},i),l=r.prototype;return l.init=function(){var t=this;t.set(),n.timer&&e(window).resize(function(){clearTimeout(n.timerId)}),Library.resizeStop(function(){t.resetValue()},100)},l.set=function(){var e=this;return n.total=e.getVisibleLength(),n.stageWidth=n.$frame.width(),n.itemWidth=n.$items.outerWidth(!0),n.visible=Math.floor(n.stageWidth/n.itemWidth),n.max=Math.ceil(n.total/n.visible),n.distance=n.visible*n.itemWidth,n.current=Math.ceil(n.current/n.visible),n.$slide.css({width:n.total*n.itemWidth,left:n.distance*n.current*-1}),n.$pointer[0]&&e.setPointer(),e.resetButton(n.current),e.setEvent(),e},l.getVisibleLength=function(){var t=0;return n.$items.each(function(){"none"!==e(this).css("display")&&(t+=1)}),t},l.resetValue=function(){var e=this;e.resetButton(n.current,n.current),n.total=e.getVisibleLength();var t=n.visible;return n.stageWidth=n.$frame.width(),n.itemWidth=n.$items.outerWidth(!0),n.visible=Math.floor(n.stageWidth/n.itemWidth),n.max=Math.ceil(n.total/n.visible),n.distance=n.visible*n.itemWidth,n.current=Math.floor(n.current*t/n.visible),n.$slide.css({width:n.total*n.itemWidth,left:n.distance*n.current*-1}),n.$pointer[0]&&e.setPointer(),e.resetButton(n.current),e.setEvent(),e},l.setPointer=function(){for(var t=this,i=document.createDocumentFragment(),r=n.$pointer[0],l=(r.cloneNode(!0),r.parentNode),s=0,a=n.max;a>s;s+=1)i.appendChild(r.cloneNode(!0));return n.$pointer=e(l).html(i).find("li"),n.$pointer.removeClass(n.activeClass),t},l.setTimer=function(){var e=this;n.timerId&&clearTimeout(n.timerId),n.timerId=setTimeout(function(){if(n.max<=1)return!1;if(!n.loop&&n.current==n.max-1)return!1;var t=n.current==n.max-1?0:n.current+1;e.controller(t,n.current)},n.timer)},l.setEvent=function(){var e=this;if(n.timer&&(e.setTimer(),n.$items.hover(function(){clearTimeout(n.timerId)},function(){e.setTimer()})),n.$items.on("flickmoveX.Slider",function(t){n.isFlick&&e._move(t.moveX)}).on("flickcancel.Slider",function(){n.isFlick&&e._moveReset()}).on("flickX.Slider",function(e){n.isFlick&&(0<e.moveX?n.$prev.click():n.$next.click())}),(n.$next[0]||n.$prev[0])&&(n.$next.click(function(){if(!n.isAnime&&n.current!=n.max-1){var t=n.current+1;e.controller(t,n.current)}return!1}),n.$prev.click(function(){if(!n.isAnime&&0!==n.current){var t=n.current-1;e.controller(t,n.current)}return!1})),n.$thumbnail[0]&&n.$thumbnail.click(function(){var t=Math.floor(n.$thumbnail.index(this)/n.visible);return n.isAnime||n.current==t||e.ontroller(t,n.current),!1}),n.$pointer.find("a")[0]){var t=n.$pointer.find("a");t.click(function(){var i=t.index(this);return n.isAnime||n.current==i||e.controller(i,n.current),!1})}return e},l.moveTo=function(e){var t=this,e=Math.floor(e/n.visible);return n.isAnime||n.current==e||t.controller(e,n.current),t},l.controller=function(e,t){var i=this;return n.timerId&&clearTimeout(n.timerId),i.resetButton(e,t),n.current=e,i.tween(),i},l.resetButton=function(e,t){var i=this;if(n.$prev[0]&&n.$next[0]&&(n.max<=1?(n.$next.hide(),n.$prev.hide()):n.max>1&&n.loop?(n.$next.show(),n.$prev.show()):n.loop||(0==e?(n.$next.show(),n.$prev.hide()):e==n.max-1?(n.$next.hide(),n.$prev.show()):(n.$next.show(),n.$prev.show()))),n.$thumbnail[0]){var r=n.$thumbnail.slice(e*n.visible,e*n.visible+n.visible),l=n.$thumbnail.slice(t*n.visible,t*n.visible+n.visible);"all-rover"==n.type?(Library.active(r.addClass(n.activeClass).find("img")),Library.rollover({$rollover:l.removeClass(n.activeClass).find("img").removeClass(n.activeClass)})):"all-alpha"===n.type&&(Library.active(r.addClass(n.activeClass).find("img"),{type:"alpha"}),Library.rollover({$alpha:l.removeClass(n.activeClass).find("img").removeClass(n.activeClass)}))}return n.$pointer[0]&&(n.$pointer.eq(e).addClass(n.activeClass),n.$pointer.eq(t).removeClass(n.activeClass)),i},l._move=function(e){return n.$slide.css({left:-n.distance*n.current+e}),this},l._moveReset=function(){return n.$slide.css({left:-n.distance*n.current}),this},l.tweenCall=function(){},l.tween=function(){var e=this;return n.isAnime=!0,e.tweenCall(),n.tweenStartCall(n),n.tweenCall(n),n.$slide.velocity({left:-n.distance*n.current},n.duration,n.easing,function(){n.isAnime=!1,n.timer&&e.setTimer(),n.tweenStopCall(n)}),e},new r}}(jQuery);