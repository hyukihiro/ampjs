/**
 * amp JavaScript Library
 *
 * @licence MIT Licence
 *
 * author Yoshihito Fujiwara
 * source https://bitbucket.org/cutupworks/ampjs
 * Copyright (c) 2014 Yoshihito Fujiwara
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */


!function(e){e.event.special.flick={data:{wrapElm:"html",hit:50,area:10},setup:function(n){var t=e(this),i=e("html");t.on("mousedown.FLICK",function(r){var o=e.extend({},e.event.special.flick.data,n,r);e.event.special.flick.handler(t,i,o)})},teardown:function(){e(this).off(orig,e.event.special.flick.handler)},handler:function(n,t,i){var r=e.extend({},i),o=!1,u=0;r.preventDefault(),n.off("mousemove.FLICK mouseup.FLICK").on("mousemove.FLICK",function(e){e.preventDefault(),u=r.pageX-e.pageX,r.area<Math.abs(u)&&(o=!0)}),n.children().off("click").on("click",function(e){o&&e.preventDefault()}),t.off("mouseup.FLICK").on("mouseup.FLICK",function(){n.off("mousemove.FLICK"),t.off("mouseup.FLICK"),o&&r.area<Math.abs(u)&&n.trigger({type:"flick",diffX:u})})}};var n={};n.data={},n.setup=function(){},n.teardown=function(){},n.handler=function(){}}(jQuery),function(e){e.each({mouseenter:"slipin",mouseleave:"slipout"},function(n,t){e.event.special[t]={setup:function(){e(this).on(n,e.event.special[t].handler)},teardown:function(){e(this).off(n,e.event.special[t].handler)},handler:function(n){var i={},r=e(this),o=r.offset(),u=r.width(),a=r.height(),s=(n.pageX-o.left-u/2)*(u>a?a/u:1),c=(n.pageY-o.top-a/2)*(a>u?u/a:1),f=Math.round((Math.atan2(c,s)*(180/Math.PI)+180)/90+3)%4;switch(i.originalEvent=n,i.x=s,i.y=c,i.type=t,i.direction=f,f){case 0:i.direction="top";break;case 1:i.direction="right";break;case 2:i.direction="bottom";break;case 3:i.direction="left"}r.trigger(i)}},e.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),e.fn.slip=function(e,n){return this.slipin(e).slipout(n||e)}}(jQuery),function(e){e.each({resize:"resizestop",scroll:"scrollstop"},function(n,t){e.event.special[t]={data:{eventType:t,timer:100,timerId:null},setup:function(i){var r=e.extend({},e.event.special[t].data,i);e(this).on(n,function(){e.event.special[t].handler(r)})},teardown:function(){e(this).off(n)},handler:function(n){clearTimeout(n.timerId),n.timerId=setTimeout(function(){e(this).trigger(n.eventType)},n.timer)}},e.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})}(jQuery),function(e){e.sequence=function(){var n,t,i=new e.Deferred,r=new e.Deferred;n=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),n[n.length]=i.resolve;for(var o=0,u=n.length;u>o;o+=1)e.isFunction(n[o])&&(t=(t?t:r).pipe(e.proxy(function(){return this()},n[o])).fail(i.reject));return r.resolve(),i.promise()},e.stream=function(){var n,t=new e.Deferred,i=0;n=e.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments),n[n.length]=t.resolve;var r=function(o,u){e.when(o(u)).fail(t.reject).done(function(e){t.notify(e),i+=1,i!==n.length&&r(n[i],e)})};return r(n[i]),t.promise()}}(jQuery),function(e){e.each({css:"qCss",attr:"qAttr"},function(n,t){e.fn[t]=function(t,i,r){var o=this;return e.isFunction(i)&&(r=i,i=void 0),o.queue(function(){o[n](t,i).dequeue(),e.isFunction(r)&&r(o)})}}),e.each({addClass:"qAddClass",removeClass:"qRemoveClass"},function(n,t){e.fn[t]=function(t,i){var r=this;return r.queue(function(){r[n](t).dequeue(),e.isFunction(i)&&i(r)})}}),e.fn.qCall=function(e){var n=this;return n.queue(function(){e(),n.dequeue()})},e.fn.replaceAttr=function(e,n,t){var i=this.attr(e);return i?(t=t?t:"",this.attr(e,i.replace(n,t))):this},e.fn.getExt=function(e){var n=this.attr(e);return n.indexOf(".")>-1?n.substring(n.lastIndexOf(".")):void 0}}(jQuery);